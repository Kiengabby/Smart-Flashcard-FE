<div class="deck-detail-container">
  <!-- Header -->
  <div class="deck-header">
    <button nz-button nzType="text" (click)="goBack()" class="back-btn">
      <span nz-icon nzType="arrow-left" nzTheme="outline"></span>
      Quay l·∫°i
    </button>
  </div>

  <!-- Deck Info Card -->
  <nz-card 
    *ngIf="!isLoadingDeck && deck" 
    class="deck-info-card"
    [nzBordered]="false">
    <div class="deck-info">
      <div class="deck-main-info">
        <h1 class="deck-name">{{ deck.name }}</h1>
        <p class="deck-description">{{ deck.description }}</p>
        <div class="deck-stats">
          <div class="stat-item">
            <span nz-icon nzType="credit-card" nzTheme="outline"></span>
            <span class="stat-value">{{ deck.cardCount || 0 }}</span>
            <span class="stat-label">th·∫ª</span>
          </div>
        </div>
      </div>
      <div class="deck-actions">
        <button 
          nz-button 
          nzType="primary" 
          nzSize="large"
          (click)="startLearning()"
          [disabled]="!cards.length">
          <span nz-icon nzType="rocket" nzTheme="outline"></span>
          B·∫Øt ƒë·∫ßu Chinh ph·ª•c
        </button>
      </div>
    </div>
  </nz-card>

  <!-- Loading state cho deck info -->
  <nz-card *ngIf="isLoadingDeck" [nzBordered]="false">
    <div style="text-align: center; padding: 40px;">
      <nz-spin nzSimple [nzSize]="'large'"></nz-spin>
    </div>
  </nz-card>

  <nz-divider></nz-divider>

  <!-- Cards Section -->
  <div class="cards-section">
    <div class="section-header">
      <div class="section-title">
        <h2>Danh s√°ch Flashcard</h2>
        <span class="card-count">({{ cards.length }} th·∫ª)</span>
      </div>
      <button 
        nz-button 
        nzType="primary" 
        (click)="openAddCardModal()">
        <span nz-icon nzType="plus" nzTheme="outline"></span>
        Th√™m th·∫ª m·ªõi
      </button>
    </div>

    <!-- Loading state -->
    <div *ngIf="isLoadingCards" class="loading-container">
      <nz-spin nzSimple [nzSize]="'large'"></nz-spin>
      <p>ƒêang t·∫£i danh s√°ch th·∫ª...</p>
    </div>

    <!-- Empty state -->
    <nz-empty 
      *ngIf="!isLoadingCards && !cards.length"
      nzNotFoundImage="simple"
      class="empty-state">
      <div nz-empty-footer class="empty-message">
        <h3>‚ú® B·ªô th·∫ª c√≤n tr·ªëng</h3>
        <p>H√£y th√™m √≠t nh·∫•t 5 th·∫ª ƒë·ªÉ b·∫Øt ƒë·∫ßu chinh ph·ª•c!</p>
        <p class="tip">üí° M·∫πo: Ch·ªâ c·∫ßn nh·∫≠p n·ªôi dung, h·ªá th·ªëng s·∫Ω gi√∫p b·∫°n t·ªëi ∆∞u h√≥a vi·ªác h·ªçc!</p>
        <button 
          nz-button 
          nzType="primary" 
          nzSize="large"
          (click)="openAddCardModal()"
          style="margin-top: 16px;">
          <span nz-icon nzType="plus" nzTheme="outline"></span>
          Th√™m th·∫ª ƒë·∫ßu ti√™n
        </button>
      </div>
    </nz-empty>

    <!-- Cards List -->
    <div *ngIf="!isLoadingCards && cards.length" class="cards-list">
      <nz-card 
        *ngFor="let card of cards; let i = index"
        class="card-item"
        [nzBordered]="true">
        <div class="card-content">
          <div class="card-number">#{{ i + 1 }}</div>
          <div class="card-texts">
            <div class="card-side front">
              <label>M·∫∑t tr∆∞·ªõc:</label>
              <p>{{ card.frontText }}</p>
            </div>
            <div class="card-side back">
              <label>M·∫∑t sau:</label>
              <p>{{ card.backText }}</p>
            </div>
          </div>
          <div class="card-actions">
            <button 
              nz-button 
              nzType="default" 
              nzSize="small"
              (click)="openEditCardModal(card)"
              nz-tooltip="Ch·ªânh s·ª≠a">
              <span nz-icon nzType="edit" nzTheme="outline"></span>
            </button>
            <button 
              nz-button 
              nzType="default" 
              nzDanger
              nzSize="small"
              nz-popconfirm
              nzPopconfirmTitle="B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a th·∫ª n√†y?"
              nzPopconfirmPlacement="left"
              (nzOnConfirm)="deleteCard(card)"
              nz-tooltip="X√≥a">
              <span nz-icon nzType="delete" nzTheme="outline"></span>
            </button>
          </div>
        </div>
      </nz-card>
    </div>

    <!-- Progress hint khi c√≥ 1-4 th·∫ª -->
    <div *ngIf="!isLoadingCards && cards.length > 0 && cards.length < 5" class="progress-hint">
      <div class="hint-card">
        <span nz-icon nzType="info-circle" nzTheme="outline" class="hint-icon"></span>
        <div class="hint-content">
          <h4>üéØ Ti·∫øn ƒë·ªô: {{ cards.length }}/5 th·∫ª</h4>
          <p>Th√™m {{ 5 - cards.length }} th·∫ª n·ªØa l√† b·∫°n c√≥ th·ªÉ b·∫Øt ƒë·∫ßu chinh ph·ª•c r·ªìi! üöÄ</p>
        </div>
      </div>
    </div>

    <!-- Ready to conquer khi c√≥ ƒë·ªß 5+ th·∫ª -->
    <div *ngIf="!isLoadingCards && cards.length >= 5" class="ready-hint">
      <div class="hint-card success">
        <span nz-icon nzType="check-circle" nzTheme="outline" class="hint-icon"></span>
        <div class="hint-content">
          <h4>‚úÖ B·ªô th·∫ª ƒë√£ s·∫µn s√†ng!</h4>
          <p>B·∫°n ƒë√£ c√≥ {{ cards.length }} th·∫ª. ƒê√£ ƒë·∫øn l√∫c chinh ph·ª•c ch√∫ng!</p>
        </div>
      </div>
    </div>
  </div>
</div>


