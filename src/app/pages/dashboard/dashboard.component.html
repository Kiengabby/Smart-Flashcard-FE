<div class="dashboard-container">
  
  <div class="welcome-header modern" [class.minimized]="isWelcomeMinimized">
    <div class="floating-elements">
      <div class="float-element element-1">ğŸ¯</div>
      <div class="float-element element-2">ğŸ“š</div>
      <div class="float-element element-3">ğŸš€</div>
      <div class="float-element element-4">â­</div>
      <div class="float-element element-5">ğŸ”¥</div>
    </div>
    
    <div class="welcome-content">
      <div class="greeting-section">
        <div class="time-based-greeting">
          <span class="greeting-icon">{{ getGreetingIcon() }}</span>
          <span class="greeting-text">{{ getGreetingText() }}</span>
        </div>
        <h1 class="welcome-title animated">
          <span class="user-name">{{ currentUser.name || 'Kien' }}</span>
          <span class="wave-emoji">ğŸ‘‹</span>
        </h1>
      </div>
      
      <div class="motivation-section">
        <p class="welcome-subtitle dynamic">
          <span class="highlight-text">{{ getMotivationalQuote() }}</span>
        </p>
        <div class="progress-indicator">
          <div class="progress-text">
            <span *ngIf="!isStatsLoading">HÃ´m nay báº¡n Ä‘Ã£ há»c Ä‘Æ°á»£c <strong>{{ currentUser.studiedToday || 0 }}</strong> tá»« má»›i</span>
            <span *ngIf="isStatsLoading">Äang táº£i thÃ´ng tin há»c táº­p... <nz-spin nzSize="small"></nz-spin></span>
          </div>
          <div class="mini-progress-bar">
            <div class="progress-fill" [style.width.%]="getDailyProgress()"></div>
          </div>
        </div>
      </div>
      
      <div class="action-hint">
        <span class="hint-icon">ğŸ’¡</span>
        <span class="hint-text">Báº¯t Ä‘áº§u vá»›i viá»‡c Ã´n táº­p nhá»¯ng tháº» Ä‘Ã£ Ä‘áº¿n háº¡n nhÃ©!</span>
      </div>
    </div>
    
    <div class="close-button" (click)="minimizeWelcome()">
      <span nz-icon nzType="up" nzTheme="outline"></span>
    </div>
  </div>

  <div class="quick-stats" id="stats-overview">
    <nz-row [nzGutter]="[16, 16]">
      <nz-col [nzXs]="24" [nzSm]="12" [nzLg]="6">
        <div class="stat-card conquered-decks">
          <div class="stat-icon">
            <span nz-icon nzType="trophy" nzTheme="fill"></span>
          </div>
          <div class="stat-info">
            <div class="stat-value" *ngIf="!isStatsLoading">{{ stats.conqueredDecks }}</div>
            <div class="stat-value" *ngIf="isStatsLoading"><nz-spin nzSize="small"></nz-spin></div>
            <div class="stat-label">Bá»™ tháº» Ä‘Ã£ chinh phá»¥c</div>
          </div>
        </div>
      </nz-col>

      <nz-col [nzXs]="24" [nzSm]="12" [nzLg]="6">
        <div class="stat-card study-streak" id="study-streak">
          <div class="stat-icon">
            <span nz-icon nzType="fire" nzTheme="fill"></span>
          </div>
          <div class="stat-info">
            <div class="stat-value" *ngIf="!isStatsLoading">{{ stats.studyStreak }}</div>
            <div class="stat-value" *ngIf="isStatsLoading"><nz-spin nzSize="small"></nz-spin></div>
            <div class="stat-label">Chuá»—i ngÃ y há»c liÃªn tiáº¿p</div>
          </div>
        </div>
      </nz-col>

      <nz-col [nzXs]="24" [nzSm]="12" [nzLg]="6">
        <div class="stat-card total-words">
          <div class="stat-icon">
            <span nz-icon nzType="book" nzTheme="fill"></span>
          </div>
          <div class="stat-info">
            <div class="stat-value" *ngIf="!isStatsLoading">{{ stats.totalWordsLearned }}</div>
            <div class="stat-value" *ngIf="isStatsLoading"><nz-spin nzSize="small"></nz-spin></div>
            <div class="stat-label">Tá»•ng tá»« Ä‘Ã£ há»c</div>
          </div>
        </div>
      </nz-col>

      <nz-col [nzXs]="24" [nzSm]="12" [nzLg]="6">
        <div class="stat-card review-today" id="review-today-card">
          <div class="stat-icon">
            <span nz-icon nzType="calendar" nzTheme="fill"></span>
          </div>
          <div class="stat-info">
            <div class="stat-value highlight" *ngIf="!isStatsLoading">{{ stats.reviewToday }}</div>
            <div class="stat-value highlight" *ngIf="isStatsLoading"><nz-spin nzSize="small"></nz-spin></div>
            <div class="stat-label">Tháº» cáº§n Ã´n hÃ´m nay</div>
          </div>
        </div>
      </nz-col>
    </nz-row>
  </div>

  <!-- ğŸ† Arena Ranking Alerts Section - TEMPORARILY DISABLED (Backend API pending) -->
  <!-- TODO: Uncomment when backend API /api/arena/my-rankings is ready -->
  <!--
  <div class="ranking-alerts-section" *ngIf="!isLoadingRankings && rankingAlerts.length > 0">
    <h2 class="section-title">
      <span nz-icon nzType="trophy" nzTheme="twotone" [nzTwotoneColor]="'#faad14'"></span>
      ğŸ† ThÃ nh TÃ­ch SÃ¢n ChÆ¡i
    </h2>
    
    <nz-row [nzGutter]="[16, 16]">
      <nz-col [nzXs]="24" [nzMd]="12" [nzLg]="8" *ngFor="let alert of rankingAlerts">
        <nz-card class="ranking-alert-card" [ngClass]="getRankAlertClass(alert)" (click)="goToArenaLeaderboard(alert.deckId)">
          <div class="ranking-header">
            <div class="deck-name">{{ alert.deckName }}</div>
            <nz-badge [nzCount]="alert.currentRank" [nzStyle]="{ backgroundColor: alert.currentRank <= 3 ? '#faad14' : '#1890ff' }">
              <span class="rank-icon">{{ getRankIcon(alert.currentRank) }}</span>
            </nz-badge>
          </div>
          
          <div class="ranking-stats">
            <div class="stat-item">
              <span class="label">Háº¡ng hiá»‡n táº¡i:</span>
              <span class="value">#{{ alert.currentRank }} / {{ alert.totalPlayers }}</span>
            </div>
            
            <div class="stat-item rank-change" *ngIf="alert.rankChange !== 0">
              <nz-tag [nzColor]="alert.rankChange > 0 ? 'success' : 'error'">
                {{ getRankChangeText(alert) }}
              </nz-tag>
            </div>
            
            <div class="stat-item" *ngIf="alert.currentRank > 1">
              <span class="label">Khoáº£ng cÃ¡ch Top 1:</span>
              <span class="value alert-text">{{ alert.pointsBehind }} Ä‘iá»ƒm</span>
            </div>
            
            <div class="stat-item" *ngIf="alert.playersAhead > 0">
              <span class="label">Sá»‘ ngÆ°á»i phÃ­a trÆ°á»›c:</span>
              <span class="value competitive-text">{{ alert.playersAhead }} ngÆ°á»i ğŸ”¥</span>
            </div>
          </div>
          
          <div class="ranking-footer">
            <div class="challenge-message" *ngIf="alert.currentRank > 1">
              <span class="emoji">ğŸ˜¤</span>
              <span class="text">{{ alert.topPlayerName }} Ä‘ang dáº«n Ä‘áº§u vá»›i {{ alert.topPlayerScore }} Ä‘iá»ƒm!</span>
            </div>
            <div class="champion-message" *ngIf="alert.currentRank === 1">
              <span class="emoji">ğŸ‘‘</span>
              <span class="text">Báº¡n Ä‘ang lÃ  nhÃ  vÃ´ Ä‘á»‹ch! Báº£o vá»‡ vá»‹ trÃ­ cá»§a mÃ¬nh!</span>
            </div>
            
            <button nz-button nzType="primary" nzSize="small" class="compete-btn" (click)="goToArenaLobby(alert.deckId); $event.stopPropagation()">
              <span nz-icon nzType="fire" nzTheme="fill"></span>
              ThÃ¡ch Ä‘áº¥u ngay!
            </button>
          </div>
        </nz-card>
      </nz-col>
    </nz-row>
  </div>

  <div class="ranking-alerts-section" *ngIf="isLoadingRankings">
    <nz-spin nzTip="Äang táº£i thÃ nh tÃ­ch..."></nz-spin>
  </div>
  -->

  <div class="content-grid">
    <nz-row [nzGutter]="[16, 16]">
      <nz-col [nzXs]="24" [nzLg]="16">
        <nz-card class="action-card daily-review-card" *ngIf="stats.reviewToday > 0">
          <div class="action-content">
            <div class="action-header">
              <span nz-icon nzType="bell" nzTheme="fill" class="action-icon"></span>
              <div class="action-text">
                <h3>ÄÃ£ Ä‘áº¿n giá» Ã´n táº­p rá»“i! ğŸ¯</h3>
                <p>Báº¡n cÃ³ <strong>{{ stats.reviewToday }} tháº»</strong> cáº§n Ã´n táº­p hÃ´m nay</p>
              </div>
            </div>
            <button nz-button nzType="primary" nzSize="large" class="action-button" (click)="navigateToDailyReview()">
              <span nz-icon nzType="play-circle" nzTheme="fill"></span>
              Báº¯t Ä‘áº§u Ã”n táº­p
            </button>
          </div>
        </nz-card>
      </nz-col>

      <nz-col [nzXs]="24" [nzLg]="8">
        <nz-card class="section-card streak-card compact" [nzTitle]="streakTitle">
          <ng-template #streakTitle>
            <div class="section-header">
              <span nz-icon nzType="fire" nzTheme="fill" style="color: #ff922b;"></span>
              <span class="section-title">Chuá»—i ngÃ y há»c</span>
            </div>
          </ng-template>

          <div class="streak-display">
            <div class="streak-number">{{ stats.studyStreak }}</div>
            <div class="streak-label">ngÃ y liÃªn tiáº¿p</div>
            <div class="streak-message">Tuyá»‡t vá»i! HÃ£y tiáº¿p tá»¥c! ğŸ’ª</div>
          </div>

          <div class="calendar-mini compact">
            <div class="calendar-header">
              <button nz-button nzType="link" nzSize="small" (click)="previousMonth()">
                <span nz-icon nzType="left"></span>
              </button>
              <span class="current-month">ThÃ¡ng {{ currentMonth }}</span>
              <button nz-button nzType="link" nzSize="small" (click)="nextMonth()">
                <span nz-icon nzType="right"></span>
              </button>
            </div>
            
            <div class="calendar-grid">
              <div class="calendar-weekdays">
                <div class="weekday">CN</div>
                <div class="weekday">T2</div>
                <div class="weekday">T3</div>
                <div class="weekday">T4</div>
                <div class="weekday">T5</div>
                <div class="weekday">T6</div>
                <div class="weekday">T7</div>
              </div>
              
              <div class="calendar-days">
                <div 
                  *ngFor="let day of calendarDays"
                  class="calendar-day"
                  [class.other-month]="!day.currentMonth"
                  [class.today]="day.isToday"
                  [class.has-activity]="day.hasActivity"
                  [class.level-1]="day.activityLevel === 1"
                  [class.level-2]="day.activityLevel === 2"
                  [class.level-3]="day.activityLevel === 3"
                >
                  <span class="day-number">{{ day.date }}</span>
                  <span nz-icon nzType="fire" nzTheme="fill" class="fire-icon" *ngIf="day.hasActivity"></span>
                </div>
              </div>
            </div>
          </div>
        </nz-card>
      </nz-col>
    </nz-row>
  </div>

</div>
