<div class="dashboard-container">
  <!-- Header Section v·ªõi l·ªùi ch√†o c√° nh√¢n h√≥a -->
  <div class="welcome-section">
    <div class="greeting">
      <h1 class="greeting-title">Ch√†o bu·ªïi {{ getGreetingTime() }}, {{ userName }}! üëã</h1>
      <p class="greeting-subtitle">S·∫µn s√†ng cho b√†i h·ªçc h√¥m nay ch∆∞a?</p>
    </div>
    <div class="streak-badge">
      <div class="streak-icon">üî•</div>
      <div class="streak-info">
        <span class="streak-number">{{ currentStreak }}</span>
        <span class="streak-label">ng√†y</span>
      </div>
    </div>
  </div>

  <!-- Progress Section - 4 K·ªπ nƒÉng -->
  <div class="progress-section">
    <h2 class="section-title">Ti·∫øn ƒë·ªô c·ªßa t√¥i</h2>
    <div class="skills-grid">
      <div class="skill-card" *ngFor="let skill of skills">
        <div class="skill-icon">
          <i nz-icon [nzType]="skill.icon" [style.color]="skill.color"></i>
        </div>
        <div class="skill-info">
          <h3 class="skill-name">{{ skill.name }}</h3>
          <div class="progress-circle">
            <nz-progress 
              [nzPercent]="skill.progress" 
              nzType="circle" 
              [nzWidth]="60"
              [nzStrokeColor]="skill.color"
              [nzFormat]="progressFormat">
            </nz-progress>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Study Goal Section -->
  <div class="goal-section">
    <h2 class="section-title">M·ª•c ti√™u h·ªçc t·∫≠p h√¥m nay</h2>
    <div class="goal-card">
      <div class="goal-content">
        <div class="goal-icon">‚è∞</div>
        <div class="goal-info">
          <p class="goal-description">Th·ªùi gian h·ªçc m·ª•c ti√™u</p>
          <div class="time-selector">
            <button 
              class="time-option" 
              [class.active]="selectedTime === time"
              *ngFor="let time of timeOptions"
              (click)="selectTime(time)">
              {{ time }}p
            </button>
          </div>
        </div>
      </div>
      <div class="goal-progress">
        <div class="progress-info">
          <span class="progress-text">{{ studiedTime }}/{{ selectedTime }} ph√∫t</span>
          <span class="progress-percentage">{{ getProgressPercentage() }}%</span>
        </div>
        <nz-progress 
          [nzPercent]="getProgressPercentage()" 
          [nzStrokeColor]="'#52c41a'"
          [nzShowInfo]="false">
        </nz-progress>
      </div>
    </div>
  </div>

  <!-- CTA Section -->
  <div class="cta-section">
    <button class="start-learning-btn" nz-button nzType="primary" nzSize="large" (click)="startLearning()">
      <div class="btn-content">
        <i nz-icon nzType="play-circle" class="play-icon"></i>
        <span class="btn-text">B·∫Øt ƒë·∫ßu h·ªçc</span>
      </div>
    </button>
  </div>

  <!-- Deck Management Section -->
  <div class="deck-section">
    <div class="section-header">
      <h2 class="section-title">B·ªô th·∫ª c·ªßa t√¥i</h2>
      <button nz-button nzType="default" (click)="openCreateDeckModal()" class="create-deck-btn">
        <i nz-icon nzType="plus"></i>
        T·∫°o b·ªô th·∫ª m·ªõi
      </button>
    </div>

    <!-- Loading state -->
    <div *ngIf="isLoading" class="loading-container">
      <nz-spin nzSize="large" nzTip="ƒêang t·∫£i d·ªØ li·ªáu..."></nz-spin>
    </div>

    <!-- Empty state -->
    <div *ngIf="!isLoading && decks.length === 0" class="empty-container">
      <div class="empty-content">
        <div class="empty-icon">üìö</div>
        <h3 class="empty-title">Ch∆∞a c√≥ b·ªô th·∫ª n√†o</h3>
        <p class="empty-description">H√£y t·∫°o b·ªô th·∫ª ƒë·∫ßu ti√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu h√†nh tr√¨nh h·ªçc t·∫≠p!</p>
        <button nz-button nzType="primary" (click)="openCreateDeckModal()" class="empty-cta">
          <i nz-icon nzType="plus"></i>
          T·∫°o b·ªô th·∫ª ƒë·∫ßu ti√™n
        </button>
      </div>
    </div>

    <!-- Deck list -->
    <div *ngIf="!isLoading && decks.length > 0" class="deck-grid">
      <nz-row [nzGutter]="[16, 16]">
        <nz-col *ngFor="let deck of decks" nzXs="24" nzSm="12" nzMd="8" nzLg="6">
          <div class="deck-card" (click)="openDeck(deck)">
            <div class="deck-header">
              <h3 class="deck-title">{{ deck.name }}</h3>
              <button nz-button nzType="text" nzSize="small" class="deck-menu" (click)="$event.stopPropagation()">
                <i nz-icon nzType="more"></i>
              </button>
            </div>
            <p class="deck-description">{{ deck.description || 'Kh√¥ng c√≥ m√¥ t·∫£' }}</p>
            <div class="deck-stats">
              <div class="stat-item">
                <i nz-icon nzType="credit-card"></i>
                <span>{{ deck.cardCount || 0 }} th·∫ª</span>
              </div>
              <div class="stat-item">
                <i nz-icon nzType="clock-circle"></i>
                <span>{{ getLastStudied(deck) }}</span>
              </div>
            </div>
            <div class="deck-progress">
              <nz-progress 
                [nzPercent]="deck.progress || 0" 
                [nzStrokeColor]="'#1890ff'"
                [nzShowInfo]="false"
                nzSize="small">
              </nz-progress>
            </div>
          </div>
        </nz-col>
      </nz-row>
    </div>
  </div>
</div>


