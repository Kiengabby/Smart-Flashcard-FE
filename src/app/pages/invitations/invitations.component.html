<!-- üé® INVITATIONS PAGE - PREMIUM UI/UX -->
<div class="invitations-container">
  <!-- Header -->
  <div class="page-header">
    <button nz-button nzType="text" (click)="goBack()" class="back-btn">
      <span nz-icon nzType="arrow-left"></span>
      Quay l·∫°i
    </button>
  </div>

  <!-- Title Section -->
  <div class="title-section">
    <h1 class="page-title">
      <span nz-icon nzType="mail" class="title-icon"></span>
      L·ªùi m·ªùi h·ªçc t·∫≠p
    </h1>
    <p class="page-subtitle">
      Qu·∫£n l√Ω c√°c l·ªùi m·ªùi tham gia b·ªô th·∫ª t·ª´ b·∫°n b√®
    </p>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <nz-spin nzSimple [nzSize]="'large'"></nz-spin>
    <p>ƒêang t·∫£i l·ªùi m·ªùi...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && invitations.length === 0" class="empty-state">
    <div class="empty-icon">
      <span nz-icon nzType="inbox" nzTheme="outline"></span>
    </div>
    <div class="empty-message">
      <h3>Ch∆∞a c√≥ l·ªùi m·ªùi n√†o</h3>
      <p>B·∫°n ch∆∞a nh·∫≠n ƒë∆∞·ª£c l·ªùi m·ªùi h·ªçc t·∫≠p n√†o.</p>
      <p class="tip">H√£y chia s·∫ª b·ªô th·∫ª c·ªßa b·∫°n v·ªõi b·∫°n b√® ƒë·ªÉ c√πng nhau ti·∫øn b·ªô! üöÄ</p>
    </div>
  </div>

  <!-- Invitations List -->
  <div *ngIf="!isLoading && invitations.length > 0" class="invitations-list">
    <!-- Pending Invitations -->
    <div class="invitations-section">
      <h2 class="section-title">
        <span nz-icon nzType="clock-circle" class="section-icon"></span>
        Ch·ªù ph·∫£n h·ªìi
        <nz-tag [nzColor]="'orange'" class="count-badge">
          {{ getPendingCount() }}
        </nz-tag>
      </h2>

      <div class="invitation-cards">
        <nz-card *ngFor="let invitation of invitations" 
                 [class.pending-card]="invitation.status === InvitationStatus.PENDING"
                 class="invitation-card">
          <div class="card-content">
            <!-- Left: Deck Info -->
            <div class="deck-info">
              <div class="deck-icon">
                <span nz-icon nzType="book" nzTheme="twotone"></span>
              </div>
              <div class="deck-details">
                <h3 class="deck-name">{{ invitation.deck.name }}</h3>
                <p class="deck-description">{{ invitation.deck.description || 'Kh√¥ng c√≥ m√¥ t·∫£' }}</p>
                <div class="deck-stats">
                  <span class="stat-item">
                    <span nz-icon nzType="credit-card"></span>
                    {{ invitation.deck.cardCount || 0 }} th·∫ª
                  </span>
                </div>
              </div>
            </div>

            <!-- Middle: Sender Info -->
            <div class="sender-info">
              <div class="sender-label">L·ªùi m·ªùi t·ª´</div>
              <div class="sender-details">
                <nz-avatar 
                  [nzSize]="48"
                  [ngStyle]="{'background-color': getAvatarColor(invitation.inviter.name)}"
                  class="sender-avatar">
                  {{ getUserInitials(invitation.inviter.name) }}
                </nz-avatar>
                <div class="sender-text">
                  <div class="sender-name">{{ invitation.inviter.name }}</div>
                  <div class="sender-email">{{ invitation.inviter.email }}</div>
                </div>
              </div>
              <div class="invitation-time">
                <span nz-icon nzType="clock-circle"></span>
                {{ formatDate(invitation.createdAt) }}
              </div>
            </div>

            <!-- Right: Status & Actions -->
            <div class="invitation-actions">
              <nz-tag [nzColor]="getStatusColor(invitation.status)" class="status-tag">
                {{ getStatusText(invitation.status) }}
              </nz-tag>

              <!-- Actions for Pending -->
              <div *ngIf="invitation.status === InvitationStatus.PENDING" class="action-buttons">
                <button nz-button nzType="primary" 
                        (click)="acceptInvitation(invitation)"
                        class="accept-btn">
                  <span nz-icon nzType="check-circle"></span>
                  Ch·∫•p nh·∫≠n
                </button>
                <button nz-button nzType="default" nzDanger
                        (click)="rejectInvitation(invitation)"
                        class="reject-btn">
                  <span nz-icon nzType="close-circle"></span>
                  T·ª´ ch·ªëi
                </button>
              </div>

              <!-- Info for Accepted/Rejected -->
              <div *ngIf="invitation.status !== InvitationStatus.PENDING" class="status-info">
                <p class="status-message">
                  <span *ngIf="invitation.status === InvitationStatus.ACCEPTED">
                    ‚úÖ B·∫°n ƒë√£ tham gia b·ªô th·∫ª n√†y
                  </span>
                  <span *ngIf="invitation.status === InvitationStatus.REJECTED">
                    ‚ùå B·∫°n ƒë√£ t·ª´ ch·ªëi l·ªùi m·ªùi n√†y
                  </span>
                </p>
                <div class="response-time" *ngIf="invitation.respondedAt">
                  Ph·∫£n h·ªìi l√∫c: {{ formatDate(invitation.respondedAt) }}
                </div>
              </div>
            </div>
          </div>
        </nz-card>
      </div>
    </div>
  </div>

  <!-- Tips Section -->
  <div *ngIf="!isLoading && invitations.length > 0" class="tips-section">
    <nz-card class="tips-card">
      <div class="tips-content">
        <span nz-icon nzType="bulb" nzTheme="twotone" class="tips-icon"></span>
        <div class="tips-text">
          <h4>üí° M·∫πo h·ªçc t·∫≠p</h4>
          <ul>
            <li>Ch·∫•p nh·∫≠n l·ªùi m·ªùi ƒë·ªÉ c√πng b·∫°n b√® h·ªçc t·∫≠p v√† thi ƒë·∫•u</li>
            <li>S·ª≠ d·ª•ng t√≠nh nƒÉng "Th√°ch ƒë·∫•u" ƒë·ªÉ ki·ªÉm tra ki·∫øn th·ª©c</li>
            <li>Theo d√µi ti·∫øn ƒë·ªô c·ªßa nhau ƒë·ªÉ c√πng ti·∫øn b·ªô</li>
          </ul>
        </div>
      </div>
    </nz-card>
  </div>
</div>
