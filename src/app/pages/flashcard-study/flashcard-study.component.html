<div class="flashcard-study-container">
  <!-- Header -->
  <div class="study-header">
    <button nz-button nzType="text" (click)="goBack()" class="back-btn">
      <span nz-icon nzType="close" nzTheme="outline"></span>
    </button>
    <div class="progress-info">
      <span class="card-count">{{ currentIndex + 1 }} / {{ cards.length }}</span>
    </div>
    <button nz-button nzType="text" (click)="restart()" class="restart-btn">
      <span nz-icon nzType="reload" nzTheme="outline"></span>
    </button>
  </div>

  <!-- Progress Bar -->
  <div class="progress-bar-container">
    <nz-progress
      [nzPercent]="progress"
      [nzShowInfo]="false"
      nzStrokeColor="#52c41a"
      [nzStrokeWidth]="8">
    </nz-progress>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner">
      <span nz-icon nzType="loading" nzTheme="outline"></span>
    </div>
    <p>Đang tải thẻ học...</p>
  </div>

  <!-- Flashcard -->
  <div *ngIf="!isLoading && currentCard" class="flashcard-wrapper">
    <div 
      class="flashcard" 
      [class.flipped]="isFlipped"
      (click)="flipCard()">
      <div class="flashcard-inner">
        <!-- Front Side -->
        <div class="flashcard-face flashcard-front">
          <div class="face-label">Mặt trước</div>
          <div class="face-content">
            <p class="card-text">{{ currentCard.frontText }}</p>
          </div>
          <div class="face-hint">
            <span nz-icon nzType="eye" nzTheme="outline"></span>
            Nhấn để xem câu trả lời
          </div>
        </div>

        <!-- Back Side -->
        <div class="flashcard-face flashcard-back">
          <div class="face-label">Mặt sau</div>
          <div class="face-content">
            <p class="card-text">{{ currentCard.backText }}</p>
          </div>
          <div class="face-hint">
            <span nz-icon nzType="eye-invisible" nzTheme="outline"></span>
            Nhấn để ẩn câu trả lời
          </div>
        </div>
      </div>
    </div>

    <!-- Hint Text -->
    <p class="flip-hint">
      <span nz-icon nzType="info-circle" nzTheme="outline"></span>
      Nhấn vào thẻ để lật và xem câu trả lời
    </p>
  </div>

  <!-- Controls -->
  <div *ngIf="!isLoading && currentCard" class="study-controls">
    <!-- Knowledge Rating -->
    <div class="knowledge-rating">
      <p class="rating-label">Bạn đã biết từ này chưa?</p>
      <div class="rating-buttons">
        <button 
          nz-button 
          nzType="default" 
          nzSize="large"
          class="btn-unknown"
          (click)="markAsUnknown()">
          <span nz-icon nzType="close-circle" nzTheme="outline"></span>
          Chưa biết
        </button>
        <button 
          nz-button 
          nzType="primary" 
          nzSize="large"
          class="btn-known"
          (click)="markAsKnown()">
          <span nz-icon nzType="check-circle" nzTheme="outline"></span>
          Đã biết
        </button>
      </div>
    </div>

    <!-- Navigation -->
    <div class="navigation-controls">
      <button 
        nz-button 
        nzType="default"
        [disabled]="isFirstCard"
        (click)="previousCard()">
        <span nz-icon nzType="left" nzTheme="outline"></span>
        Trước
      </button>
      <button 
        nz-button 
        nzType="default"
        [disabled]="isLastCard"
        (click)="nextCard()">
        Sau
        <span nz-icon nzType="right" nzTheme="outline"></span>
      </button>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && !cards.length" class="empty-state">
    <span nz-icon nzType="inbox" nzTheme="outline"></span>
    <h3>Không có thẻ nào để học</h3>
    <p>Hãy thêm thẻ vào bộ thẻ trước khi bắt đầu học!</p>
    <button nz-button nzType="primary" (click)="goBack()">
      Quay lại
    </button>
  </div>
</div>

